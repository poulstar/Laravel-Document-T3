# آموزش نوشتن ساختار مناسب جهت پاسخ دادن به صورت Pagination در چارچوب JSON

###### برای اینکه بخواهیم یک الگو برای باز گرداندن پاسخ سرور به مقصد داشته باشیم. ابتدا باید json را بشناسیم. json یک الگو سلسله مراتبی است که داده را می توان به وسیله آن ذخیره یا ارسال نمود و یک الگو مرسوم در شبکه  است که می شود داده را بر آن اصول ارسال نمود. حال بحث pagination برای این است که داده های خود را قسمت قسمت کرده و در تیکه های خاص را متناسب با خواست کاربر ارسال کند. دقت کنید در یک درخواست احتمال آن کم است که یک کاربر بخواهد همه داده های ما را ببیند، به همین دلیل ارسال همه آن ها هم به نفع کاربر و سرور نیست و هم هزینه های جاری را افزایش می دهد. به همین دلیل ما قطعه کد زیر را در Controller.php می نویسیم تا در تمام controller های آینده بتوانیم از آن استفاده کنیم.
```bash
function paginatedSuccessResponse($data, $name)
{
    return response()->json(
        [
            'status' => 'success',
            $name => $data->items(),
            'meta' => [
                'pagination' => [
                    $name => [
                        'last_item' => $data->lastItem(),
                        'first_item' => $data->firstItem(),
                        'last_page' => $data->lastPage(),
                        'per_page' => $data->perPage(),
                        'current_page' => $data->currentPage(),
                        'total' => $data->total()
                    ]
                ]
            ]
        ]
    );
}
```
###### برای اینکه بخواهیم پاسخ را به صورت json بازگردانیم، تابع json را صدا می کنیم، وضعیت json را مشخص می کنیم، کلیه داده هایی که باید در یک صفحه نمایش داده شود را ارسال می کنیم و نام آن را متغیر در نظر می گیریم تا بتوان هر با به صورت مورد نظر ما باشد. در کلید meta هم اطلاعات مربوط به صفحه بندی را مشخص می کنیم و برای دریافت کننده ارسال می کنیم.

###### دقت کنید برای کسب دانش بیشتر در مورد <a href="https://laravel.com/docs/10.x/pagination">Laravel Pagination</a> می توانید مستند laravel را مطالعه کنید.






